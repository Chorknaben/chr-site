// Generated by CoffeeScript 1.7.1
var Tile,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Tile = (function() {
  function Tile(tileid, _const) {
    this.tileid = tileid;
    this["const"] = _const != null ? _const : Constants;
    this.sclSmaller = __bind(this.sclSmaller, this);
    this.onClick = __bind(this.onClick, this);
    this.core = window.core;
    this.interval = null;
    this.scaleCount = 0;
    this.headerImg = $("#header-img");
  }

  Tile.prototype.onClick = function() {
    console.log("Tile Click: id=" + this.tileid);
    if (this.tileid > 7) {
      this.tileid -= 7;
    }
    console.log(this["const"].tileResolver);
    return this.load(this["const"].tileResolver[this.tileid - 1][0], this["const"].tileResolver[this.tileid - 1][1]);
  };

  Tile.prototype.load = function(prettyWhat, urlWhat) {
    this.navigationDown();
    $("#result").load("content/" + urlWhat + ".html", (function(_this) {
      return function() {
        window.location.hash = "!/" + urlWhat;
        $(".scrolled").attr("id", urlWhat);
        _this.core.state["currentPage"] = prettyWhat;
        _this.core.state["currentURL"] = urlWhat;
        _this.core.state["tileid"] = _this.tileid;
        _this.core.registerTaker("pageChanged", true);
        return $.getScript("content/" + urlWhat + ".js").done(function() {
          _this.core.state["childPage"].onGenerateMarkup();
          _this.core.state["childPage"].onLoad();
          return $.scrollTo(".scrolled", 800, {
            onAfter: function() {
              _this.core.state["childPage"].onScrollFinished();
              _this.core.state["scrolloff"] = $(window).scrollTop();
              $(".ctitle").html("Chorknaben // " + prettyWhat);
              $(".ctitle").fadeTo(200, 1);
              $("#loading-img").css({
                visibility: "hidden"
              });
              return _this.scaleCount = 0;
            }
          });
        });
      };
    })(this));
    return $(".ctitle").fadeTo(200, 0);
  };

  Tile.prototype.sclSmaller = function() {
    if (this.scaleCount >= 20) {
      window.clearInterval(this.interval);
      return;
    }
    this.scaleCount++;
    return this.headerImg.width(90 - this.scaleCount);
  };

  Tile.prototype.activateLoadingAnimation = function() {
    return $("#loading-img").css({
      visibility: "visible"
    });
  };

  Tile.prototype.navigationDown = function() {
    var index, navItems, navLines, underLineEl;
    navItems = $('.header-nav').children('a');
    navLines = $('.header-nav').children('img');
    index = this.tileid !== 7 ? this.tileid - 1 : 4;
    underLineEl = $(navItems[index]);
    return underLineEl.css({
      "font-weight": "bold"
    });
  };

  return Tile;

})();


function withResponseObject(url, callback){
    $.ajax({
        url:url,
    })
      .done(function(data){
        callback(JSON.parse(data));   
    });
}
window["load_bilder"] = function(){
    
}
window["load_uberuns"] = function(){
    
}
;
